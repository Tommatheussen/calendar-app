"use strict";!function(){angular.module("topToolbar",["ngMaterial","angular-google-gapi"])}();
"use strict";!function(){function o(o,t,n){function l(){n.is("login")||n.go("login")}var e=this;e.getUser=t.getUser,e.goToLogin=l,e.isLoggedIn=t.isLogin}o.$inject=["GAuth","GData","$state"],angular.module("topToolbar").component("topToolbar",{templateUrl:"top-toolbar/top-toolbar.tmpl.html",controller:o,controllerAs:"vm"})}();
"use strict";!function(){angular.module("login",["angular-google-gapi","ui.router"])}();
"use strict";!function(){angular.module("login").config(["$stateProvider",function(n){var o={name:"login",url:"/login",component:"login"};n.state(o)}])}();
"use strict";!function(){function n(n,o,t){function i(){o.isLogin()?l():null}function l(){console.log("user is: ",o.getUser()),t.go("calendar")}function e(){n.checkAuth().then(function(){l()},function(){n.login().then(function(){l()})})}var c=this;c.$onInit=i,c.doLogin=e}n.$inject=["GAuth","GData","$state"],angular.module("login").component("login",{templateUrl:"login/login.tmpl.html",controller:n,controllerAs:"vm",bindings:{flex:"="}})}();
"use strict";!function(){angular.module("error",[])}();
"use strict";!function(){function o(o,t){function r(o){a.push(o),s||e()}function e(){s=!0;var o=a.shift();t.show(i).then(function(t){"ok"===t&&n(o),0===a.length?s=!1:e()})}function n(t){l.locals={error:t},o.show(l)}var i=t.simple().textContent("Oops, that's not quite right...").action("Details").highlightAction(!0).position("bottom right").hideDelay(5e3),l={templateUrl:"error-handler/error-dialog.tmpl.html",controllerAs:"vm",controller:"errorDialogController"},a=[],s=!1;return{addToast:r,openToast:e,openDialog:n}}o.$inject=["$mdDialog","$mdToast"],angular.module("error").factory("errorService",o)}();
"use strict";!function(){function r(r){r.decorator("$exceptionHandler",["$delegate","$injector",function(r,e){return"toJSON"in Error.prototype||Object.defineProperty(Error.prototype,"toJSON",{value:function(){var r={};return Object.getOwnPropertyNames(this).forEach(function(e){r[e]=this[e]},this),r},configurable:!0,writable:!0}),function(t,o){var n=e.get("errorService");console.log("got exception: ",t,o);var i=JSON.parse(JSON.stringify(t));n.addToast(i),r(t,o)}}])}r.$inject=["$provide"],angular.module("error").config(r)}();
"use strict";!function(){function r(r,o){function e(){r.hide()}var n=this;n.close=e,n.error=o}r.$inject=["$mdDialog","error"],angular.module("error").controller("errorDialogController",r)}();
"use strict";!function(){angular.module("footer",["ngMaterial"])}();
"use strict";!function(){function t(t,o,e){}t.$inject=["GAuth","GData","$state"],angular.module("footer").component("footer",{templateUrl:"footer/footer.tmpl.html",controller:t,controllerAs:"vm"})}();
"use strict";!function(){angular.module("calendar",["ngMaterial","ui.router"])}();
"use strict";!function(){angular.module("calendar").factory("calendarService",["$http","GApi","calendarId","$filter","errorService","$q",function(t,e,n,r,a,i){function c(){function e(t){return t.data}return t.get("shifts.json").then(e).catch(u)}function s(t,a){function i(t){var e={};return t.items.map(function(t){var n=r("amDateFormat")(t.start.dateTime,"DD-MM-YYYY");e[n]={shift:t.summary,id:t.id}}),e}return e.executeAuth("calendar","events.list",{calendarId:n,fields:["items/start, items/summary, items/id"],timeMin:t,timeMax:a}).then(i).catch(u)}function u(t){return console.log(t),a.addToast(t),i.reject(t)}return{getShifts:c,getPreviousEvents:s}}])}();
"use strict";!function(){angular.module("calendar").filter("duration",function(){return function(n){var t=n.start.hour;return t+=":",t+=n.start.minute,t+="-",t+=n.end.hour,t+=":",t+=n.end.minute}})}();
"use strict";!function(){angular.module("calendar").constant("calendarId","hj3i0ucmkenfjmdbrr85v7o2q8@group.calendar.google.com")}();
"use strict";!function(){angular.module("calendar").config(["$stateProvider",function(a){var n={name:"calendar",url:"/",component:"calendar"};a.state(n)}])}();
"use strict";!function(){function t(t,e,n,a,r,i,s,o){function u(){p.currentDate.setMonth(p.currentDate.getMonth()-1,1),h()}function c(){p.currentDate.setMonth(p.currentDate.getMonth()+1,1),h()}function f(){a.getShifts().then(function(t){p.shifts=t}),h()}function h(){p.offsetDays=M(p.currentDate.getMonth(),p.currentDate.getUTCFullYear()),p.days=m(p.currentDate.getMonth(),p.currentDate.getUTCFullYear());var t=new Date(p.currentDate.getFullYear(),p.currentDate.getMonth(),1).toISOString(),e=new Date(p.currentDate.getFullYear(),p.currentDate.getMonth()+1,1).toISOString();a.getPreviousEvents(t,e).then(function(t){Y=t,l()})}function l(){p.days.map(function(t){var e=s("amDateFormat")(t.date,"DD-MM-YYYY");t.shift=Y[e]?Y[e].shift:null})}function d(t){return new Array(t)}function D(t,e){var n=new Date(t);return n.setHours(e.hour),n.setMinutes(e.minute),{dateTime:n}}function g(t){var e,a={calendarId:i},r=s("amDateFormat")(t.date,"DD-MM-YYYY");t.shift&&!Y[r]?(e="insert",a.start=D(t.date,p.shifts[t.shift].start),a.end=D(t.date,p.shifts[t.shift].end),a.summary=t.shift):t.shift&&Y[r]&&Y[r].shift!==t.shift?(e="update",a.eventId=Y[r].id,a.start=D(t.date,p.shifts[t.shift].start),a.end=D(t.date,p.shifts[t.shift].end),a.summary=t.shift):!t.shift&&Y[r]&&(e="delete",a.eventId=Y[r].id);var o=e?n.createRequest("calendar",w[e],a):null;return o}function v(){var t=[];if(p.days.forEach(function(e){var n=g(e);n&&t.push(n)},this),t.length>0){for(var e=r.gapi.client.newBatch(),n=0;n<t.length;n++)e.add(t[n]);e.then(function(t){p.days.forEach(function(t){var e=s("amDateFormat")(t.date,"DD-MM-YYYY");Y[e]=t.shift},this);var e=o.alert().title("Update success").textContent("De shiften zijn succesvol opgeslagen in Google Calendar.").ok("Super!");o.show(e)},function(t){console.log(t)},this)}}function m(t,e){for(var n=new Date(e,t,1),a=[];n.getMonth()===t;)a.push({date:new Date(n.toString())}),n.setDate(n.getDate()+1);return a}function M(t,e){var n=new Date(e,t,1),a=(n.getDay()||7)-1;return a}var p=this;p.$onInit=f,p.saveShifts=v,p.getRange=d,p.prevMonth=u,p.nextMonth=c,p.today=new Date,p.currentDate=new Date;var Y={},w={insert:"events.insert",delete:"events.delete",update:"events.patch"};p.setShift=function(t,e){t.shift===e?t.shift=null:t.shift=e}}t.$inject=["$mdMedia","$scope","GApi","calendarService","$window","calendarId","$filter","$mdDialog"],angular.module("calendar").component("calendar",{templateUrl:"calendar/calendar.tmpl.html",controller:t,controllerAs:"vm",bindings:{flex:"="}})}();
"use strict";!function(){angular.module("calendarApp",["ngMaterial","calendar","login","topToolbar","footer","error","ui.router","angular-google-gapi","angulartics","angulartics.google.analytics","angularMoment"])}();
"use strict";!function(){function e(e,n,t,o,r){var c="576434137862-eb52i5mrh8lag6tpnsrpviqjfntprnq3.apps.googleusercontent.com";n.load("calendar","v3").catch(function(e,n){console.log("error occured",e,n)}),e.setClient(c),e.setScope("https://www.googleapis.com/auth/calendar"),o.onBefore({to:"calendar"},function(){var n=r.defer();return e.checkAuth().then(function(){n.resolve(!0)},function(){n.resolve(t.target("login"))}),n.promise})}e.$inject=["GAuth","GApi","$state","$transitions","$q"],angular.module("calendarApp").run(e)}();
"use strict";!function(){angular.module("calendarApp").config(["$urlRouterProvider","$analyticsProvider",function(r,e){r.otherwise("/"),e.trackExceptions(!0)}])}();