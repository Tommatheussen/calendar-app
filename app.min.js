"use strict";angular.module("topToolbar",["ngMaterial","angular-google-gapi"]);
"use strict";!function(){function o(o,t,n){var l=this;l.getUser=t.getUser,l.goToLogin=function(){n.is("login")||n.go("login")},l.isLoggedIn=t.isLogin}o.$inject=["GAuth","GData","$state"],angular.module("topToolbar").component("topToolbar",{templateUrl:"top-toolbar/top-toolbar.tmpl.html",controller:o,controllerAs:"vm"})}();
"use strict";angular.module("login",["angular-google-gapi","ui.router"]);
"use strict";angular.module("login").config(["$stateProvider",function(n){n.state({name:"login",url:"/login",component:"login"})}]);
"use strict";!function(){function n(n,t,o){function i(){console.log("user is: ",t.getUser()),o.go("calendar")}this.$onInit=function(){t.isLogin()&&i()},this.doLogin=function(){n.checkAuth().then(function(){i()},function(){n.login().then(function(){i()})})}}n.$inject=["GAuth","GData","$state"],angular.module("login").component("login",{templateUrl:"login/login.tmpl.html",controller:n,controllerAs:"vm",bindings:{flex:"="}})}();
"use strict";angular.module("footer",["ngMaterial"]);
"use strict";!function(){function o(o){this.openHelp=function(){o.showHelp=!0},o.$on("help:closed",function(){o.showHelp=!1})}o.$inject=["$rootScope"],angular.module("footer").component("footer",{templateUrl:"footer/footer.tmpl.html",controller:o,controllerAs:"vm"})}();
"use strict";angular.module("calendar",["ngMaterial","ui.router"]);
"use strict";angular.module("calendar").factory("calendarService",["$http","GApi","calendarId","$filter","errorService","$q",function(t,r,n,a,e,i){return{getShifts:function(){return t.get("shifts.json").then(function(t){return t.data}).catch(c)},getPreviousEvents:function(t,e){return r.executeAuth("calendar","events.list",{calendarId:n,fields:["items/start, items/summary, items/id"],timeMin:t,timeMax:e}).then(function(t){var r={};return t.items.map(function(t){var e=a("amDateFormat")(t.start.dateTime,"DD-MM-YYYY");r[e]={shift:t.summary,id:t.id}}),r}).catch(c)}};function c(t){return console.log(t),e.addToast(t),i.reject(t)}}]);
"use strict";angular.module("calendar").filter("duration",function(){return function(r){var t=r.start.hour;return t+=":",t+=r.start.minute,t+="-",t+=r.end.hour,t+=":",t+=r.end.minute}});
"use strict";angular.module("calendar").constant("calendarId","hj3i0ucmkenfjmdbrr85v7o2q8@group.calendar.google.com");
"use strict";angular.module("calendar").config(["$stateProvider",function(a){a.state({name:"calendar",url:"/",component:"calendar"})}]);
"use strict";!function(){function t(t,e,o,r,n,f,c,a,s){var i,u=this;u.$onInit=function(){r.getShifts().then(function(t){u.shifts=t}),d()},u.saveShifts=function(){var i=[];if(u.days.forEach(function(t){var e,n,a,r,s=(e=t,a={calendarId:f},r=c("amDateFormat")(e.date,"DD-MM-YYYY"),e.shift&&!h[r]?(n="insert",a.start=D(e.date,u.shifts[e.shift].start),a.end=D(e.date,u.shifts[e.shift].end),a.summary=e.shift):e.shift&&h[r]&&h[r].shift!==e.shift?(n="update",a.eventId=h[r].id,a.start=D(e.date,u.shifts[e.shift].start),a.end=D(e.date,u.shifts[e.shift].end),a.summary=e.shift):!e.shift&&h[r]&&(n="delete",a.eventId=h[r].id),n?o.createRequest("calendar",l[n],a):null);s&&i.push(s)},this),0<i.length){for(var t=n.gapi.client.newBatch(),e=0;e<i.length;e++)t.add(i[e]);t.then(function(t){u.days.forEach(function(t){var e=c("amDateFormat")(t.date,"DD-MM-YYYY");h[e]=t.shift},this);var e=a.alert().title("Update success").textContent("De shiften zijn succesvol opgeslagen in Google Calendar.").ok("Super!");a.show(e)},function(t){console.log(t)},this)}},u.getRange=function(t){return new Array(t)},u.prevMonth=function(){u.currentDate.setMonth(u.currentDate.getMonth()-1,1),d()},u.nextMonth=function(){u.currentDate.setMonth(u.currentDate.getMonth()+1,1),d()},u.today=new Date,u.currentDate=new Date,s.$on("help:opened",function(){i=angular.copy(u.days[9-u.offsetDays].shift),u.days[9-u.offsetDays].shift="klv"}),s.$on("help:closed",function(){u.days[9-u.offsetDays].shift=i});var h={},l={insert:"events.insert",delete:"events.delete",update:"events.patch"};function d(){var t,e;u.offsetDays=(t=u.currentDate.getMonth(),e=u.currentDate.getUTCFullYear(),(new Date(e,t,1).getDay()||7)-1),u.days=function(t,e){var n=new Date(e,t,1),a=[];for(;n.getMonth()===t;)a.push({date:new Date(n.toString())}),n.setDate(n.getDate()+1);return a}(u.currentDate.getMonth(),u.currentDate.getUTCFullYear());var n=new Date(u.currentDate.getFullYear(),u.currentDate.getMonth(),1).toISOString(),a=new Date(u.currentDate.getFullYear(),u.currentDate.getMonth()+1,1).toISOString();r.getPreviousEvents(n,a).then(function(t){h=t,u.days.map(function(t){var e=c("amDateFormat")(t.date,"DD-MM-YYYY");t.shift=h[e]?h[e].shift:null})})}function D(t,e){var n=new Date(t);return n.setHours(e.hour),n.setMinutes(e.minute),{dateTime:n}}u.setShift=function(t,e){t.shift===e?t.shift=null:t.shift=e}}t.$inject=["$mdMedia","$scope","GApi","calendarService","$window","calendarId","$filter","$mdDialog","$rootScope"],angular.module("calendar").component("calendar",{templateUrl:"calendar/calendar.tmpl.html",controller:t,controllerAs:"vm",bindings:{flex:"="}})}();
"use strict";angular.module("error",[]);
"use strict";!function(){function o(t,o){var r=o.simple().textContent("Oops, that's not quite right...").action("Details").highlightAction(!0).position("bottom right").hideDelay(5e3),e={templateUrl:"error-handler/error-dialog.tmpl.html",controllerAs:"vm",controller:"errorDialogController"},n=[],i=!1;return{addToast:function(o){n.push(o),i||l()},openToast:l,openDialog:a};function l(){i=!0;var t=n.shift();o.show(r).then(function(o){"ok"===o&&a(t),0===n.length?i=!1:l()})}function a(o){e.locals={error:o},t.show(e)}}o.$inject=["$mdDialog","$mdToast"],angular.module("error").factory("errorService",o)}();
"use strict";!function(){function r(r){r.decorator("$exceptionHandler",["$delegate","$injector",function(n,i){return"toJSON"in Error.prototype||Object.defineProperty(Error.prototype,"toJSON",{value:function(){var e={};return Object.getOwnPropertyNames(this).forEach(function(r){e[r]=this[r]},this),e},configurable:!0,writable:!0}),function(r,e){var t=i.get("errorService");console.log("got exception: ",r,e);var o=JSON.parse(JSON.stringify(r));t.addToast(o),n(r,e)}}])}r.$inject=["$provide"],angular.module("error").config(r)}();
"use strict";!function(){function r(r,o){this.close=function(){r.hide()},this.error=o}r.$inject=["$mdDialog","error"],angular.module("error").controller("errorDialogController",r)}();
"use strict";angular.module("calendarApp",["ngMaterial","calendar","login","topToolbar","footer","error","ui.router","angular-google-gapi","angulartics","angulartics.google.analytics","angularMoment","angularHelpOverlay"]);
"use strict";!function(){function e(n,e,t,o,r){e.load("calendar","v3").catch(function(e,n){console.log("error occured",e,n)}),n.setClient("576434137862-eb52i5mrh8lag6tpnsrpviqjfntprnq3.apps.googleusercontent.com"),n.setScope("https://www.googleapis.com/auth/calendar"),o.onBefore({to:"calendar"},function(){var e=r.defer();return n.checkAuth().then(function(){e.resolve(!0)},function(){e.resolve(t.target("login"))}),e.promise})}e.$inject=["GAuth","GApi","$state","$transitions","$q"],angular.module("calendarApp").run(e)}();
"use strict";angular.module("calendarApp").config(["$urlRouterProvider","$analyticsProvider",function(r,e){r.otherwise("/"),e.trackExceptions(!0)}]);