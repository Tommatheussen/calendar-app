"use strict";!function(){angular.module("topToolbar",["ngMaterial","angular-google-gapi"])}();
"use strict";!function(){function o(o,t,n){function l(){n.is("login")||n.go("login")}var e=this;e.getUser=t.getUser,e.goToLogin=l,e.isLoggedIn=t.isLogin}o.$inject=["GAuth","GData","$state"],angular.module("topToolbar").component("topToolbar",{templateUrl:"top-toolbar/top-toolbar.tmpl.html",controller:o,controllerAs:"vm"})}();
"use strict";!function(){angular.module("login",["angular-google-gapi","ui.router"])}();
"use strict";!function(){angular.module("login").config(["$stateProvider",function(n){var o={name:"login",url:"/login",component:"login"};n.state(o)}])}();
"use strict";!function(){function n(n,o,t){function i(){o.isLogin()?l():null}function l(){console.log("user is: ",o.getUser()),t.go("calendar")}function e(){n.checkAuth().then(function(){l()},function(){n.login().then(function(){l()})})}var c=this;c.$onInit=i,c.doLogin=e}n.$inject=["GAuth","GData","$state"],angular.module("login").component("login",{templateUrl:"login/login.tmpl.html",controller:n,controllerAs:"vm",bindings:{flex:"="}})}();
"use strict";!function(){angular.module("calendar",["ngMaterial","ui.router"])}();
"use strict";!function(){angular.module("calendar").factory("calendarService",["$http","GApi","calendarId","$filter",function(t,e,n,a){function i(){function e(t){return t.data}return t.get("shifts.json").then(e).catch(c)}function r(t,i){function r(t){var e={};return t.items.map(function(t){var n=a("amDateFormat")(t.start.dateTime,"DD-MM-YYYY");e[n]={shift:t.summary,id:t.id}}),e}return e.executeAuth("calendar","events.list",{calendarId:n,fields:["items/start, items/summary, items/id"],timeMin:t,timeMax:i}).then(r).catch(c)}function c(t){console.log(t)}return{getShifts:i,getPreviousEvents:r}}])}();
"use strict";!function(){angular.module("calendar").filter("duration",function(){return function(n){var t=n.start.hour;return t+=":",t+=n.start.minute,t+="-",t+=n.end.hour,t+=":",t+=n.end.minute}})}();
"use strict";!function(){angular.module("calendar").constant("calendarId","hj3i0ucmkenfjmdbrr85v7o2q8@group.calendar.google.com")}();
"use strict";!function(){angular.module("calendar").config(["$stateProvider",function(a){var n={name:"calendar",url:"/",component:"calendar"};a.state(n)}])}();
"use strict";!function(){function t(t,e,n,a,i,r,s){function o(){var t=new Date;v.offsetDays=g(t.getMonth(),t.getUTCFullYear()),v.days=d(t.getMonth(),t.getUTCFullYear());var e=new Date(t.getFullYear(),t.getMonth(),1).toISOString(),n=new Date(t.getFullYear(),t.getMonth()+1,0).toISOString();a.getPreviousEvents(e,n).then(function(t){m=t,f()}),a.getShifts().then(function(t){v.shifts=t})}function f(){v.days.map(function(t){var e=s("amDateFormat")(t.date,"DD-MM-YYYY");t.shift=m[e]?m[e].shift:null})}function h(t){return new Array(t)}function l(t,e){var n=new Date(t);return n.setHours(e.hour),n.setMinutes(e.minute),{dateTime:n}}function u(t){var e,a={calendarId:r},i=s("amDateFormat")(t.date,"DD-MM-YYYY");t.shift&&!m[i]?(e="insert",a.start=l(t.date,v.shifts[t.shift].start),a.end=l(t.date,v.shifts[t.shift].end),a.summary=t.shift):t.shift&&m[i]&&m[i].shift!==t.shift?(e="update",a.eventId=m[i].id,a.start=l(t.date,v.shifts[t.shift].start),a.end=l(t.date,v.shifts[t.shift].end),a.summary=t.shift):!t.shift&&m[i]&&(e="delete",a.eventId=m[i].id);var o=e?n.createRequest("calendar",D[e],a):null;return o}function c(){var t=[];if(v.days.forEach(function(e){var n=u(e);n&&t.push(n)},this),t.length>0){for(var e=i.gapi.client.newBatch(),n=0;n<t.length;n++)e.add(t[n]);e.then(function(t){console.log(t),v.days.forEach(function(t){var e=s("amDateFormat")(t.date,"DD-MM-YYYY");m[e]=t.shift},this)},function(t){console.log(t)},this)}}function d(t,e){for(var n=new Date(e,t,1),a=[];n.getMonth()===t;)a.push({date:new Date(n.toString())}),n.setDate(n.getDate()+1);return a}function g(t,e){var n=new Date(e,t,1),a=(n.getDay()||7)-1;return a}var v=this;v.$onInit=o,v.saveShifts=c,v.getRange=h;var m={},D={insert:"events.insert",delete:"events.delete",update:"events.patch"};v.smallScreen=t("xs"),e.$watch(function(){return t("xs")},function(t){v.smallScreen=t}),v.setShift=function(t,e){t.shift===e?t.shift=null:t.shift=e}}t.$inject=["$mdMedia","$scope","GApi","calendarService","$window","calendarId","$filter"],angular.module("calendar").component("calendar",{templateUrl:"calendar/calendar.tmpl.html",controller:t,controllerAs:"vm",bindings:{flex:"="}})}();
"use strict";!function(){angular.module("calendarApp",["ngMaterial","calendar","login","topToolbar","ui.router","angular-google-gapi","angulartics","angulartics.google.analytics","angularMoment"])}();
"use strict";!function(){function e(e,n,t,o,r){var c="576434137862-eb52i5mrh8lag6tpnsrpviqjfntprnq3.apps.googleusercontent.com";n.load("calendar","v3").catch(function(e,n){console.log("error occured",e,n)}),e.setClient(c),e.setScope("https://www.googleapis.com/auth/calendar"),o.onBefore({to:"calendar"},function(){var n=r.defer();return e.checkAuth().then(function(){n.resolve(!0)},function(){n.resolve(t.target("login"))}),n.promise})}e.$inject=["GAuth","GApi","$state","$transitions","$q"],angular.module("calendarApp").run(e)}();
"use strict";!function(){angular.module("calendarApp").config(["$urlRouterProvider","$analyticsProvider",function(r,e){r.otherwise("/"),e.trackExceptions(!0)}])}();