"use strict";angular.module("topToolbar",["ngMaterial","angular-google-gapi"]);
"use strict";function topToolbarController(o,t,l){function r(){l.is("login")||l.go("login")}var n=this;n.getUser=t.getUser,n.goToLogin=r,n.isLoggedIn=t.isLogin}topToolbarController.$inject=["GAuth","GData","$state"],angular.module("topToolbar").component("topToolbar",{templateUrl:"top-toolbar/top-toolbar.tmpl.html",controller:topToolbarController,controllerAs:"vm"});
"use strict";angular.module("calendar",["ngMaterial","ui.router"]);
"use strict";angular.module("calendar").factory("calendarService",["$http",function(t){function n(){function n(t){return t.data}return t.get("shifts.json").then(n).catch(c)}function e(){}function c(t){console.log(t)}return{getShifts:n,getCalendar:e}}]);
"use strict";angular.module("calendar").filter("duration",function(){return function(r){var t=r.start.hour;return t+=":",t+=r.start.minute,t+="-",t+=r.end.hour,t+=":",t+=r.end.minute}});
"use strict";angular.module("calendar").constant("calendarId","hj3i0ucmkenfjmdbrr85v7o2q8@group.calendar.google.com");
"use strict";angular.module("calendar").config(["$stateProvider",function(a){var e={name:"calendar",url:"/",component:"calendar"};a.state(e)}]);
"use strict";function calendarController(t,e,n,a,s,i,r){function o(){var t=new Date;m.offsetDays=h(t.getMonth()-1,t.getUTCFullYear()),m.days=u(t.getMonth()-1,t.getUTCFullYear()),n.executeAuth("calendar","events.list",{calendarId:i,fields:["items/start, items/summary, items/id"]}).then(function(t){console.log(t.items),t.items.map(function(t){var e=r("amDateFormat")(t.start.dateTime,"DD-MM-YYYY");v[e]={shift:t.summary,id:t.id}}),l()},function(t){console.log(t)}),a.getShifts().then(function(t){m.shifts=t})}function l(){m.days.map(function(t){var e=r("amDateFormat")(t.date,"DD-MM-YYYY");t.shift=v[e]?v[e].shift:void 0})}function d(t,e){var n=new Date(t);return n.setHours(e.hour),n.setMinutes(e.minute),{dateTime:n}}function c(t){var e,a={calendarId:i},s=r("amDateFormat")(t.date,"DD-MM-YYYY");t.shift&&!v[s]?(e="insert",a.start=d(t.date,m.shifts[t.shift].start),a.end=d(t.date,m.shifts[t.shift].end),a.summary=t.shift):t.shift&&v[s]&&v[s].shift!==t.shift?(e="update",a.eventId=v[s].id,a.start=d(t.date,m.shifts[t.shift].start),a.end=d(t.date,m.shifts[t.shift].end),a.summary=t.shift):v[s]&&(e="delete",a.eventId=v[s].id);var o=e?n.createRequest("calendar",g[e],a):void 0;return o}function f(){var t=s.gapi.client.newBatch();m.days.forEach(function(e){var n=c(e);n&&t.add(n)},this),t.then(function(t){console.log(t)},function(t){console.log(t)},this)}function u(t,e){for(var n=new Date(e,t,1),a=[];n.getMonth()===t;)a.push({date:new Date(n.toString())}),n.setDate(n.getDate()+1);return a}function h(t,e){var n=new Date(e,t,1),a=(n.getDay()||7)-1;return a}var m=this;m.$onInit=o,m.saveShifts=f;var v={},g={insert:"events.insert",delete:"events.delete",update:"events.patch"};m.getRange=function(t){return new Array(t)},m.smallScreen=t("xs"),e.$watch(function(){return t("xs")},function(t){m.smallScreen=t}),m.setShift=function(t,e){t.shift===e?t.shift=null:t.shift=e}}calendarController.$inject=["$mdMedia","$scope","GApi","calendarService","$window","calendarId","$filter"],angular.module("calendar").component("calendar",{templateUrl:"calendar/calendar.tmpl.html",controller:calendarController,controllerAs:"vm",bindings:{flex:"="}});
"use strict";angular.module("login",["angular-google-gapi","ui.router"]);
"use strict";angular.module("login").config(["$stateProvider",function(n){var o={name:"login",url:"/login",component:"login"};n.state(o)}]);
"use strict";function loginController(n,o,t){function l(){o.isLogin()?i():null}function i(){console.log("user is: ",o.getUser()),t.go("home")}function e(){n.checkAuth().then(function(){i()},function(){n.login().then(function(){i()})})}var r=this;r.$onInit=l,r.doLogin=e}loginController.$inject=["GAuth","GData","$state"],angular.module("login").component("login",{templateUrl:"login/login.tmpl.html",controller:loginController,controllerAs:"vm",bindings:{flex:"="}});
"use strict";angular.module("calendarApp",["ngMaterial","calendar","login","topToolbar","ui.router","angular-google-gapi","angulartics","angulartics.google.analytics","angularMoment"]);
"use strict";angular.module("calendarApp").run(["GAuth","GApi","$state","$transitions","$q",function(e,n,t,o,r){var a="576434137862-eb52i5mrh8lag6tpnsrpviqjfntprnq3.apps.googleusercontent.com";n.load("calendar","v3").catch(function(e,n){console.log("error occured",e,n)}),e.setClient(a),e.setScope("https://www.googleapis.com/auth/calendar"),o.onBefore({to:"calendar"},function(){var n=r.defer();return e.checkAuth().then(function(){n.resolve(!0)},function(){n.resolve(t.target("login"))}),n.promise})}]);
"use strict";angular.module("calendarApp").config(["$urlRouterProvider",function(r){r.otherwise("/")}]);