"use strict";angular.module("topToolbar",["ngMaterial","angular-google-gapi"]);
"use strict";!function(){function o(o,t,n){var l=this;l.getUser=t.getUser,l.goToLogin=function(){n.is("login")||n.go("login")},l.isLoggedIn=t.isLogin}o.$inject=["GAuth","GData","$state"],angular.module("topToolbar").component("topToolbar",{templateUrl:"top-toolbar/top-toolbar.tmpl.html",controller:o,controllerAs:"vm"})}();
"use strict";angular.module("login",["angular-google-gapi","ui.router"]);
"use strict";angular.module("login").config(["$stateProvider",function(n){var o={name:"login",url:"/login",component:"login"};n.state(o)}]);
"use strict";!function(){function n(n,o,t){function i(){console.log("user is: ",o.getUser()),t.go("calendar")}var l=this;l.$onInit=function(){o.isLogin()&&i()},l.doLogin=function(){n.checkAuth().then(function(){i()},function(){n.login().then(function(){i()})})}}n.$inject=["GAuth","GData","$state"],angular.module("login").component("login",{templateUrl:"login/login.tmpl.html",controller:n,controllerAs:"vm",bindings:{flex:"="}})}();
"use strict";angular.module("footer",["ngMaterial"]);
"use strict";!function(){function o(o){this.openHelp=function(){o.showHelp=!0},o.$on("help:closed",function(){o.showHelp=!1})}o.$inject=["$rootScope"],angular.module("footer").component("footer",{templateUrl:"footer/footer.tmpl.html",controller:o,controllerAs:"vm"})}();
"use strict";angular.module("calendar",["ngMaterial","ui.router"]);
"use strict";angular.module("calendar").factory("calendarService",["$http","GApi","calendarId","$filter","errorService","$q",function(t,e,r,n,a,i){function c(t){return console.log(t),a.addToast(t),i.reject(t)}return{getShifts:function(){return t.get("shifts.json").then(function(t){return t.data}).catch(c)},getPreviousEvents:function(t,a){return e.executeAuth("calendar","events.list",{calendarId:r,fields:["items/start, items/summary, items/id"],timeMin:t,timeMax:a}).then(function(t){var e={};return t.items.map(function(t){var r=n("amDateFormat")(t.start.dateTime,"DD-MM-YYYY");e[r]={shift:t.summary,id:t.id}}),e}).catch(c)}}}]);
"use strict";angular.module("calendar").filter("duration",function(){return function(r){var t=r.start.hour;return t+=":",t+=r.start.minute,t+="-",t+=r.end.hour,t+=":",t+=r.end.minute}});
"use strict";angular.module("calendar").constant("calendarId","hj3i0ucmkenfjmdbrr85v7o2q8@group.calendar.google.com");
"use strict";angular.module("calendar").config(["$stateProvider",function(a){var e={name:"calendar",url:"/",component:"calendar"};a.state(e)}]);
"use strict";!function(){function t(t,e,n,a,r,s,i,o,f){function u(){g.offsetDays=D(g.currentDate.getMonth(),g.currentDate.getUTCFullYear()),g.days=d(g.currentDate.getMonth(),g.currentDate.getUTCFullYear());var t=new Date(g.currentDate.getFullYear(),g.currentDate.getMonth(),1).toISOString(),e=new Date(g.currentDate.getFullYear(),g.currentDate.getMonth()+1,1).toISOString();a.getPreviousEvents(t,e).then(function(t){m=t,c()})}function c(){g.days.map(function(t){var e=i("amDateFormat")(t.date,"DD-MM-YYYY");t.shift=m[e]?m[e].shift:null})}function h(t,e){var n=new Date(t);return n.setHours(e.hour),n.setMinutes(e.minute),{dateTime:n}}function l(t){var e,a={calendarId:s},r=i("amDateFormat")(t.date,"DD-MM-YYYY");return t.shift&&!m[r]?(e="insert",a.start=h(t.date,g.shifts[t.shift].start),a.end=h(t.date,g.shifts[t.shift].end),a.summary=t.shift):t.shift&&m[r]&&m[r].shift!==t.shift?(e="update",a.eventId=m[r].id,a.start=h(t.date,g.shifts[t.shift].start),a.end=h(t.date,g.shifts[t.shift].end),a.summary=t.shift):!t.shift&&m[r]&&(e="delete",a.eventId=m[r].id),e?n.createRequest("calendar",p[e],a):null}function d(t,e){for(var n=new Date(e,t,1),a=[];n.getMonth()===t;)a.push({date:new Date(n.toString())}),n.setDate(n.getDate()+1);return a}function D(t,e){return(new Date(e,t,1).getDay()||7)-1}var g=this;g.$onInit=function(){a.getShifts().then(function(t){g.shifts=t}),u()},g.saveShifts=function(){var t=[];if(g.days.forEach(function(e){var n=l(e);n&&t.push(n)},this),t.length>0){for(var e=r.gapi.client.newBatch(),n=0;n<t.length;n++)e.add(t[n]);e.then(function(t){g.days.forEach(function(t){var e=i("amDateFormat")(t.date,"DD-MM-YYYY");m[e]=t.shift},this);var e=o.alert().title("Update success").textContent("De shiften zijn succesvol opgeslagen in Google Calendar.").ok("Super!");o.show(e)},function(t){console.log(t)},this)}},g.getRange=function(t){return new Array(t)},g.prevMonth=function(){g.currentDate.setMonth(g.currentDate.getMonth()-1,1),u()},g.nextMonth=function(){g.currentDate.setMonth(g.currentDate.getMonth()+1,1),u()},g.today=new Date,g.currentDate=new Date;var v;f.$on("help:opened",function(){v=angular.copy(g.days[9-g.offsetDays].shift),g.days[9-g.offsetDays].shift="klv"}),f.$on("help:closed",function(){g.days[9-g.offsetDays].shift=v});var m={},p={insert:"events.insert",delete:"events.delete",update:"events.patch"};g.setShift=function(t,e){t.shift===e?t.shift=null:t.shift=e}}t.$inject=["$mdMedia","$scope","GApi","calendarService","$window","calendarId","$filter","$mdDialog","$rootScope"],angular.module("calendar").component("calendar",{templateUrl:"calendar/calendar.tmpl.html",controller:t,controllerAs:"vm",bindings:{flex:"="}})}();
"use strict";angular.module("error",[]);
"use strict";!function(){function o(o,t){function r(){a=!0;var o=l.shift();t.show(n).then(function(t){"ok"===t&&e(o),0===l.length?a=!1:r()})}function e(t){i.locals={error:t},o.show(i)}var n=t.simple().textContent("Oops, that's not quite right...").action("Details").highlightAction(!0).position("bottom right").hideDelay(5e3),i={templateUrl:"error-handler/error-dialog.tmpl.html",controllerAs:"vm",controller:"errorDialogController"},l=[],a=!1;return{addToast:function(o){l.push(o),a||r()},openToast:r,openDialog:e}}o.$inject=["$mdDialog","$mdToast"],angular.module("error").factory("errorService",o)}();
"use strict";!function(){function r(r){r.decorator("$exceptionHandler",["$delegate","$injector",function(r,e){return"toJSON"in Error.prototype||Object.defineProperty(Error.prototype,"toJSON",{value:function(){var r={};return Object.getOwnPropertyNames(this).forEach(function(e){r[e]=this[e]},this),r},configurable:!0,writable:!0}),function(t,o){var n=e.get("errorService");console.log("got exception: ",t,o);var i=JSON.parse(JSON.stringify(t));n.addToast(i),r(t,o)}}])}r.$inject=["$provide"],angular.module("error").config(r)}();
"use strict";!function(){function r(r,o){var e=this;e.close=function(){r.hide()},e.error=o}r.$inject=["$mdDialog","error"],angular.module("error").controller("errorDialogController",r)}();
"use strict";angular.module("calendarApp",["ngMaterial","calendar","login","topToolbar","footer","error","ui.router","angular-google-gapi","angulartics","angulartics.google.analytics","angularMoment","angularHelpOverlay"]);
"use strict";!function(){function e(e,n,t,o,r){n.load("calendar","v3").catch(function(e,n){console.log("error occured",e,n)}),e.setClient("576434137862-eb52i5mrh8lag6tpnsrpviqjfntprnq3.apps.googleusercontent.com"),e.setScope("https://www.googleapis.com/auth/calendar"),o.onBefore({to:"calendar"},function(){var n=r.defer();return e.checkAuth().then(function(){n.resolve(!0)},function(){n.resolve(t.target("login"))}),n.promise})}e.$inject=["GAuth","GApi","$state","$transitions","$q"],angular.module("calendarApp").run(e)}();
"use strict";angular.module("calendarApp").config(["$urlRouterProvider","$analyticsProvider",function(r,e){r.otherwise("/"),e.trackExceptions(!0)}]);